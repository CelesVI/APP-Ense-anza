<!DOCTYPE html>
<html>
<head>
	<title>Nivel 1 - Actividad 3</title>
	<link rel="stylesheet" type="text/css" href="../css/style.css">
    <link rel="stylesheet" type="text/css" href="../css/animacion.css">
</head>
<body onload="javascript: startArtyom()">
	<h1>Armar parejas</h1>
	<h1>Flopi y Tini tienen que agrupar las imagenes que empiezan con el mismo sonido</h1>
<div>
    <div style="width: 0px; height: 0px; margin-left: 350px">
	   <div id="caja1" ondragenter="return enter(event)" ondragover="return over(event)" ondragleave="return leave(event)" ondrop="return drop(event)">	<img src="../img/tini.png" class="imgmonstruosjuego">
	   </div>
        <div id="caja2" ondragenter="return enter(event)" ondragover="return over(event)" ondragleave="return leave(event)" ondrop="return drop(event)"> <img src="../img/flopi.png" class="imgmonstruosjuego">
        </div>
        <div id="caja3">
            <p style="height: 40px; padding: 0 auto;"><img src="../img/tini.png" class="imgmonstruosjuego">Necesito las que empiezan con E </p>
        <p style="height: 40px;"><img src="../img/flopi.png" class="imgmonstruosjuego">Necesito las que empiezan con I</p>
        <div style=" width: 253px; height: 230px; background-color: #f4c842; margin-left: 250px; border: 2px solid black; padding: 0 auto;">
        <img class="imgJuegos I" id="arrastrable1" draggable="true" ondragstart="start(event)" ondragend="end(event)" src="../img/niveles/indio.png" onclick="javascript: enmarcar1(event);" data-valor="indio">
        <img class="imgJuegos E" id="arrastrable2" draggable="true" ondragstart="start(event)" ondragend="end(event)" src="../img/niveles/estrella.png" onclick="javascript: enmarcar1(event);" data-valor="estrella">
        <br/>
        <img class="imgJuegos E" id="arrastrable3" draggable="true" ondragstart="start(event)" ondragend="end(event)" src="../img/niveles/escoba.png" onclick="javascript: enmarcar1(event);" data-valor="escoba">
        <img class="imgJuegos I" id="arrastrable4" draggable="true" ondragstart="start(event)" ondragend="end(event)" src="../img/niveles/isla.png" onclick="javascript: enmarcar1(event);" data-valor="isla">
        </div>
        <br/>
        
          <button class="botonJuegos" onclick="javascript: comprobar4()"><img class="botonIJuegos" src="../img/comprobar.png"></button> 
          <button class="botonJuegos" onclick="confirmSalida()"><img src="../img/salir.png" class="botonIJuegos"></button> </div>
    </div>
</div>
<style type="text/css">


#caja1, #caja2{
    float: left;
    width: 200px;
    height: 200px;
    padding: 10px;
    margin: 10px;
}


#caja1 {
    background: #5f5;
    border: solid grey;
    border-radius: 4px;
}

#caja2 {
    background: #f55;
    border: solid grey;
    border-radius: 4px;
}

#caja3 {
    width: 500px;
    height: 500px;
}
</style>

<script type="text/javascript">

        contador = 0; // Variable global para tener poder poner un id unico a cada elemento cuando se clona.

        function start(e) {
            e.dataTransfer.effecAllowed = 'move'; // Define el efecto como mover (Es el por defecto)
            e.dataTransfer.setData("Data", e.target.id); // Coje el elemento que se va a mover
            e.dataTransfer.setDragImage(e.target, 0, 0); // Define la imagen que se vera al ser arrastrado el elemento y por donde se coje el elemento que se va a mover (el raton aparece en la esquina sup_izq con 0,0)
            e.target.style.opacity = '0.4'; 
        }

        function end(e){
            e.target.style.opacity = ''; // Pone la opacidad del elemento a 1           
            e.dataTransfer.clearData("Data");
        }

        function enter(e) {
            e.target.style.border = '3px dotted #555'; 
        }

        function leave(e) {
            e.target.style.border = ''; 
        }

        function over(e) {
            var elemArrastrable = e.dataTransfer.getData("Data"); // Elemento arrastrado
            var id = e.target.id; // Elemento sobre el que se arrastra
            
            // return false para que se pueda soltar

            if (id == 'caja1'){
                return false;  
            }   

            if (id == 'caja2')
                return false;
            }

    
        /**
        * 
        * Mueve el elemento
        *
        **/
        function drop(e){

            var elementoArrastrado = e.dataTransfer.getData("Data"); // Elemento arrastrado
            e.target.appendChild(document.getElementById(elementoArrastrado));
          
            tamContX = $('#'+e.target.id).width();
            tamContY = $('#'+e.target.id).height();

            tamElemX = $('#'+elementoArrastrado).width('50px');
            tamElemY = $('#'+elementoArrastrado).height('50px');
    
            posXCont = $('#'+e.target.id).position().left;
            posYCont = $('#'+e.target.id).position().top;

            // Posicion absoluta del raton
            x = e.layerX;
            y = e.layerY;

            // Si parte del elemento que se quiere mover se queda fuera se cambia las coordenadas para que no sea asi
            if (posXCont + tamContX <= x + tamElemX){
                x = posXCont + tamContX - tamElemX;
            }

            if (posYCont + tamContY <= y + tamElemY){
                y = posYCont + tamContY - tamElemY;
            }

            document.getElementById(elementoArrastrado).style.position = "absolute";
            document.getElementById(elementoArrastrado).style.left = x + "px";
            document.getElementById(elementoArrastrado).style.top = y + "px";
        }
    </script>
    <script src="../js/funciones.js"></script>
    <script src="../js/jquery-3.1.1.js"></script>
    <script type="text/javascript"></script>
    <script src="../js/artyom.min.js"></script>
    <script src="../js/artyomCommands.js"></script>
</body>
</html>